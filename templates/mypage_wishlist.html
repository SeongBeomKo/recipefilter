{%with messages = get_flashed_messages()%}
  {%if messages %}
    <script type="text/javascript">
      alert("{{messages[-1]}}");
    </script>
    {%endif%}
  {%endwith%}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>이건 못 먹지</title>

     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
                $("#headers").load("header.html");  //헤더 인클루드
            }
        );
    </script>

    <style>
     .main-contnent {
         width: 1400px;
         align-items: center;
         margin: auto;
         padding: 10px 10px 10px 10px;
        }
     .subtitle {
        width: 1400px;
        font-weight: 600;
        font-size: xxx-large;
        text-align: center;
        margin-top: 50px;
     }

    .sidebar {
         background-color: darkseagreen;
         width: 200px;
         height: 150px;
         margin-top: 100px;
         margin-right: 10px;
         border-radius: 0.25rem;
     }

     .nav-link {
         display: block;
         font-weight: bold;
         font-size: large;
         color: white;
         text-align: center;
         margin-top: 20px;
         vertical-align: center;
     }

     .card-columns {
         width: 900px;
         margin-left: 300px;
     }
     #main-btn {
         display: block;
         background-color: coral;
         border: coral;
         margin: auto;
         margin-top: 40px;
         margin-bottom: 40px;
         align-content:center;

     }

    </style>
    <script type="text/javascript">
        $(document).ready(function () {
            showRecipes();
        });

        function showRecipes() {
            $.ajax({
                type: "GET",
                url: "/myrecipeview",
                data: {},
                success: function (response) {
                    let recipes = response['recipes']
                    for (let i = 0; i < recipes.length; i++) {
                        let title = recipes[i]['title']
                        let hyperlink = recipes[i]['hyperlink']
                        let image = recipes[i]['image']
                        let description = recipes[i]['description']
                        let ingredient = recipes[i]['ingredient']
                        let category = recipes[i]['category']

                        let temp_html = ` <div class="card" property="height:750px" style="box-shadow: 3px 3px 3px grey;; border-radius: 10px;" >
                                                <img class="card-img-top"
                                                     src=${image}
                                                     alt="Card image cap">
                                                <div class="card-body" style="overflow: scroll; text-overflow: fade; white-space: normal;height: 310px;">
                                                    <a href=${hyperlink} class="card-title"><span style="font-weight:bold"> 레시피 이름: </span>${title}</a>
                                                    <p class="card-text"><span style="font-weight:bold"> 레시피 재료: </span> ${ingredient} </p>
                                                    <p class="card-text"><span style="font-weight:bold"> 레시피 분류 : </span>${category} </p>
                                                    <p class="card-text comment"><span style="font-weight:bold">레시피 설명: </span>${description} </p>
                                                    <button type="button" class="btn btn-primary" id="login-btn" onclick="window.location.href='/wishlistminus?title=${title}'">찜삭제</button>
                                                </div>
                                            </div>`

                        $('#cards-box').append(temp_html)
                    }
                }
            })
        }
    </script>
</head>
<body>
<!-- header file import 로그인 이전 헤더-->
<header>
    {% include 'header.html' %}
</header>

<div class="main-contnent">
    <label class="subtitle">찜목록</label>
        <button type="button" class="btn btn-primary" id="main-btn" onclick="window.location.href='/'">메인페이지로</button>
        <div class="sidebar">
            <ul class="nav flex-column">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="/mypage_info">개인정보수정</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">찜목록</a>
                </li>
                </li>
            </ul>
        </div>

        <div class="card-columns" id="cards-box">

        </div>

</div>

</body>
</html>